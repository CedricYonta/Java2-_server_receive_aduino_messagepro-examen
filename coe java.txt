import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;

public class Main {
  public static void main(String[] args) {
    int port = 1234; // le port sur lequel le serveur écoute les connexions

    try (ServerSocket serverSocket = new ServerSocket(port)) {
      System.out.println("Serveur démarré sur le port " + port);

      // Attente de la connexion d'un client
      Socket clientSocket = serverSocket.accept();
      System.out.println("Client connecté depuis " + clientSocket.getInetAddress().getHostAddress());

      // Lecture des données envoyées par le client (dans ce cas, l'Arduino)
      BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
      String inputLine;
      while ((inputLine = in.readLine()) != null) {
        System.out.println("Données reçues : " + inputLine);
      }
    } catch (IOException e) {
      System.out.println("Erreur lors de l'exécution du serveur : " + e.getMessage());
    }
  }
}
